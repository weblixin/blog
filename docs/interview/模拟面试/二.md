---
title: 模拟面试2
order: 2
---

<a name="B2dpi"></a>

### react 为什么需要合成事件

如果 react 事件绑定在了真实的 DOM 节点上，一个节点同时有多个事件时，页面的相应和内存的占用会受到很大影响，因此出现了合成事件。事件没有在目标对象上绑定，而是在 document 上监听所支持的所有事件，当事件发生并冒泡至 document 时，react 将事件内容封装并交由真正的处理还输运行<br />​<br /> <a name="n9cyk"></a>

### 为什么有时 react 两次 setState，只执行一次

react 有自己的优化机制，为了防止频繁触发 render 函数，造成页面卡顿，react 会维护一个队列用来存储 state，在达到一定数量或者一定时间时，会执行一次 setState，这样可以有效避免页面重复执行 render 函数，避免页面卡顿<br />​<br /> <a name="LYbtQ"></a>

### redux 有哪些原则

1. 单一数据源
1. 只能通过 store 触发 action 来改变
1. reducer 函数必须为纯函数

<a name="J42FR"></a>

### CSS 选择器有哪些

1. 标签选择器
1. 类选择器
1. ID 选择器
1. 子选择器
1. 相邻选择器
1. 群选择器
1. 伪类选择器
1. 属性选择器
1. 全局选择器
1. 兄弟选择器
1. 包含选择器

<a name="ETPjl"></a>

### 前端页面优化

1. 减少 head 标签中的 JS 堵塞

-   将 script 标签放在 body 标签后边
-   scirpt 标签加 defer 属性，js 异步加载，readystatechange => interactive 时加载，只适用于 IE9 以下的浏览器
-   script 标签加 async 属性，js 在页面加载完之后立即执行，不过只能加载外部 js，不能在 script 标签中写 js 代码

2. 减少 head 标签中的 css 资源

-   css 中涉及到图片的，可以用 svg 转成 icon

3. nginx 中开启 gzip 压缩
4. html 不要嵌套太多层，css 选择器不要太复杂，js 不要滥用闭包
5. 单页面应用，组件懒加载，组件动态加载
6. 使用 loading，加载进度条等，优化用户的体验

<a name="qhdUp"></a>

### 浏览器渲染过程

1. GUI 渲染线程，负责渲染浏览器界面，解析 html/css，构建 DOM 树，渲染 DOM 树，布局，绘制，一旦页面出现回流，会触发此进程
1. JS 引擎线程，在 js 引擎线程执行时，GUI 线程会被挂起
1. 事件触发线程，依赖于 JS 队列机制完成
1. 定时器触发线程，依赖于 JS 队列机制完成
1. 异步 http 请求线程

<a name="iYDw3"></a>

### 浏览器从输入 URL 到页面渲染都发生了什么

1. 从本地查找域名，有的话直接用 hosts 里的 ip 地址，没有的话查询 DNS，获取 ip 地址
1. 建立 TCP 连接，进行三次握手
1. 客户端发送 http 请求
1. 服务端处理 http 请求，返回处理结果给客户端
1. 关闭 TCP 连接，需要四次挥手
1. 浏览器收到结果，开始解析资源，生成 DOM，同时结合 css 生成的 cssom 树生成渲染树
1. 根据渲染树渲染页面

<a name="KPANV"></a>

### 三次握手和四次挥手

<a name="X7a2z"></a>

#### 三次握手

-   第一次握手，客户端向服务端发送一个请求，报文包括 SYN，请求建立新链接的标志，seq 序号，seq = x
-   第二次握手，服务端向客户端返回数据，报文包括 SYN，ACK，表示服务端收到数据，ack = x + 1，seq = y
-   第三次握手，客户端确认收到服务器数据，并发送报文给服务端，ACK，seq = x + 1, ack = y + 1

<a name="8PaSK"></a>

#### 四次挥手

-   第一次挥手，客户端向服务端发送请求释放连接的报文，包括 FIN，seq = x
-   第二次挥手，服务端向客户端发送报文，确定客服端想要释放连接的请求，ACK，seq = y, ack = x + 1
-   第三次挥手，服务端做好释放连接的准备，再次向客户端发送报文，FIN,ACK, seq = z, ack = y + 1
-   第四次挥手，客户端确认释放连接，ACK,seq = y + 1, ack = z + 1
