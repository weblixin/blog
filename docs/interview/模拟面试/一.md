---
title: 模拟面试1
order: 1
---

## react setState 是同步还是异步

> 在 react 中，原生 js 监听事件中的 setState 是同步的，如 addEventListener， setTimeout 等而在 react 的控制事件中，setState 是异步的，如 onClick 等

### setState 有两种传参方式：

1. 直接传入对象
2. 传入两个函数，第一个函数有两个参数，第一个参数是当前的 state，第二个参数是当前的 props，返回的是修改后的 state，第二个函数是修改后的回调函数

### react 如何控制同步还是异步

-   react 是根据 isBatchingUpdates 来设置同步异步的，而 isBatchingUpdates 默认是 false，即同步更新。其中，有 batchUpdates 函数来设置 isBatchingUpdates

-   setState 连续设置会合并处理，通过函数传参，可以解决合并问题

-   setState 之后，React 会将传入的参数与组件当前状态合并，触发调和过程

-   经过调和过程，React 会以相对高效的方式根据新的状态候检 Dom 树饼渲染 ui 界面

-   在 react 得到新的 dom 树之后，会自动计算出新旧 dom 之间的结构差异，然后进行最小化重渲染

-   diff 算法可以相对精确的计算出哪些位置发生了变化，做到按需家在，不用重新渲染整个界面

## 什么是高阶组件，举例说明

-   高阶组件就是一个函数，将一个组件作为参数传入，返回一个新的组件
-   高阶组件可以接收任意状态的子组件，且不会对他们各自的内部状态进行修改

## 解释一下原型链

> JS 是基于原型的语言，在 js 中几乎一切皆对象，每一个对象都有原型，原型可能为一个对象，也可能是 null，而每一个原型对象又有原型，这样就形成了一条原型链。

-   _ proto_ 是原型查询中实际用到的，它总是指向 prototype
-   prototype 是函数独有的，在定义构造函数时自动创建，总是被**proto**所指
-   所有的对象都有**proto**属性，还有特有的原型属性 prototype。prototype 对象默认有两个属性，constructor 属性和**proto**属性。prototype 属性可以给函数和对象添加可共享的方法或者属性，而**proto**时查找某函数或对象的原型链方式。constructor 这个属性包含了一个指针，指回原构造函数

## instanceof 原理

-   instanceof 运算符用于测试构造函数的 prototype 属性是否出现在对象原型链中的任何位置

### A instanceof B

-   A 必须是一个对象，B 必须是一个 JavaScript 函数
-   判断 B.prototype 在 A 的原型链上

## apply、call 以及 bind 的作用及区别

http://note.youdao.com/s/SH9bzIH6

## position 有哪些值，作用分别是什么

-   statics 默认值
-   relative 相对定位，相对于元素本身的位置

// 以下两种会脱离文档流

-   absolute 绝对定位，相对于上一级定位元素进行定位，如果上级元素没有设置定位属性，则相对于浏览器窗口进行定位
-   fixed 固定定位，相对于浏览器窗口进行定位

## 说下你对 DOM 树的理解

> DOM 是指文档对象模型

-   在一个 html 中，每一个标签都是个对象，整个这个 dom 树也是一个对象，这个对象又有许多个标签对象组成，我们可以通过 dom 提供的方法来查询到每一个元素

## 重排和重绘是什么,有什么区别

> 重绘不一定会导致重排，但是重排一定会导致重绘

-   重排：当渲染树的一部分必须更新并且节点的尺寸发生了变化，浏览器会使渲染树中受到影响的部分失效，并重新构造渲染树

```
触发重排的几种情况
1. 添加，删除dom
2. 元素位置改变
3. 元素尺寸改变
4. 页面渲染初始化
5. 浏览器窗口尺寸发生变化
6. 获取浏览器的某些属性
```

重绘：在元素的外观被改变所触发的浏览器行为，浏览器会根据元素的新属性重新绘制，是元素呈现新的外观

> 减少重绘和重排
>
> 1. 不要一条一条的修改 DOM 样式，可以先定义好 class，动态修改 DOM 的 className
> 2. 不要把 DOM 节点的属性值放在一个循环当成循环里的变量
> 3. 修改 position 为 fixed 或 absolute 时的 top/bottom/left/right，不会导致重排
> 4. 比使用 table 布局

## 浏览器的优化

浏览器会维护一个队列，把所有引起重绘重排的操作放入这个队列，等队列中的操作到了一定数量或者到了一定时间，浏览器会 flush 队列，处理一批操作，这样多次重排重绘会变成一次重排重绘

[comment]: <> (## https 加密过程是怎样的)
